analysis_app         | 2024-09-12 05:43:40,563 - utils.image_processing - INFO - Waiting for images on https://www.onthemarket.com/details/13135630/#/photos/1
analysis_app         | 2024-09-12 05:43:40,563 INFO     Waiting for images on https://www.onthemarket.com/details/13135630/#/photos/1
analysis_app         | 2024-09-12 05:43:40,605 - utils.image_processing - INFO - Images found on https://www.onthemarket.com/details/13135630/#/photos/1
analysis_app         | 2024-09-12 05:43:40,605 INFO     Images found on https://www.onthemarket.com/details/13135630/#/photos/1
analysis_app_celery  | [2024-09-12 05:43:41,169: INFO/MainProcess] Task analysis.tasks.analyze_property[3c3a7fa7-88a0-413a-ba73-e42ba85f3a47] received
analysis_app         | 192.168.65.1:48408 - - [12/Sep/2024:05:43:41] "POST /api/analysis/properties/analyze/" 202 13
analysis_app_celery  | [2024-09-12 05:43:44,167: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:43:44,520 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloading images', 'progress': 0}
analysis_app         | 2024-09-12 05:43:44,520 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloading images', 'progress': 0}
analysis_app_celery  | [2024-09-12 05:43:50,034: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 1
analysis_app_celery  | [2024-09-12 05:43:50,034: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:43:50,625 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 1', 'progress': 4.761904761904762}
analysis_app         | 2024-09-12 05:43:50,625 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 1', 'progress': 4.761904761904762}
analysis_app_celery  | [2024-09-12 05:43:57,072: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 2
analysis_app_celery  | [2024-09-12 05:43:57,072: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:43:57,401 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 2', 'progress': 9.523809523809524}
analysis_app         | 2024-09-12 05:43:57,401 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 2', 'progress': 9.523809523809524}
analysis_app_celery  | [2024-09-12 05:44:02,164: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 3
analysis_app_celery  | [2024-09-12 05:44:02,165: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:02,606 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 3', 'progress': 14.285714285714285}
analysis_app         | 2024-09-12 05:44:02,606 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 3', 'progress': 14.285714285714285}
analysis_app_celery  | [2024-09-12 05:44:10,479: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 4
analysis_app_celery  | [2024-09-12 05:44:10,480: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:11,191 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 4', 'progress': 19.047619047619047}
analysis_app         | 2024-09-12 05:44:11,191 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 4', 'progress': 19.047619047619047}
analysis_app_celery  | [2024-09-12 05:44:15,503: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 5
analysis_app_celery  | [2024-09-12 05:44:15,503: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:16,123 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 5', 'progress': 23.809523809523807}
analysis_app         | 2024-09-12 05:44:16,123 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 5', 'progress': 23.809523809523807}
analysis_app_celery  | [2024-09-12 05:44:21,337: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 6
analysis_app_celery  | [2024-09-12 05:44:21,338: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:21,653 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 6', 'progress': 28.57142857142857}
analysis_app         | 2024-09-12 05:44:21,653 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 6', 'progress': 28.57142857142857}
analysis_app_celery  | [2024-09-12 05:44:25,642: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 7
analysis_app_celery  | [2024-09-12 05:44:25,643: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:25,962 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 7', 'progress': 33.33333333333333}
analysis_app         | 2024-09-12 05:44:25,962 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 7', 'progress': 33.33333333333333}
analysis_app_celery  | [2024-09-12 05:44:28,782: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 8
analysis_app_celery  | [2024-09-12 05:44:28,783: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:29,050 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 8', 'progress': 38.095238095238095}
analysis_app         | 2024-09-12 05:44:29,050 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 8', 'progress': 38.095238095238095}
analysis_app_celery  | [2024-09-12 05:44:31,794: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 9
analysis_app_celery  | [2024-09-12 05:44:31,795: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:32,097 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 9', 'progress': 42.857142857142854}
analysis_app         | 2024-09-12 05:44:32,097 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 9', 'progress': 42.857142857142854}
analysis_app_celery  | [2024-09-12 05:44:36,083: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 10
analysis_app_celery  | [2024-09-12 05:44:36,084: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:36,398 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 10', 'progress': 47.61904761904761}
analysis_app         | 2024-09-12 05:44:36,398 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 10', 'progress': 47.61904761904761}
analysis_app_celery  | [2024-09-12 05:44:41,268: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 11
analysis_app_celery  | [2024-09-12 05:44:41,268: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:41,614 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 11', 'progress': 52.38095238095239}
analysis_app         | 2024-09-12 05:44:41,614 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 11', 'progress': 52.38095238095239}
analysis_app_celery  | [2024-09-12 05:44:45,301: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 12
analysis_app_celery  | [2024-09-12 05:44:45,301: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:45,616 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 12', 'progress': 57.14285714285714}
analysis_app         | 2024-09-12 05:44:45,616 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 12', 'progress': 57.14285714285714}
analysis_app_celery  | [2024-09-12 05:44:49,267: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 13
analysis_app_celery  | [2024-09-12 05:44:49,268: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:49,607 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 13', 'progress': 61.904761904761905}
analysis_app         | 2024-09-12 05:44:49,607 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 13', 'progress': 61.904761904761905}
analysis_app_celery  | [2024-09-12 05:44:52,780: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 14
analysis_app_celery  | [2024-09-12 05:44:52,780: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:53,293 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 14', 'progress': 66.66666666666666}
analysis_app         | 2024-09-12 05:44:53,293 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 14', 'progress': 66.66666666666666}
analysis_app_celery  | [2024-09-12 05:44:57,588: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 15
analysis_app_celery  | [2024-09-12 05:44:57,588: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:44:57,840 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 15', 'progress': 71.42857142857143}
analysis_app         | 2024-09-12 05:44:57,840 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 15', 'progress': 71.42857142857143}
analysis_app_celery  | [2024-09-12 05:45:02,198: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 16
analysis_app_celery  | [2024-09-12 05:45:02,198: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:45:02,816 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 16', 'progress': 76.19047619047619}
analysis_app         | 2024-09-12 05:45:02,816 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 16', 'progress': 76.19047619047619}
analysis_app_celery  | [2024-09-12 05:45:07,419: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 17
analysis_app_celery  | [2024-09-12 05:45:07,420: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:45:07,733 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 17', 'progress': 80.95238095238095}
analysis_app         | 2024-09-12 05:45:07,733 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 17', 'progress': 80.95238095238095}
analysis_app_celery  | [2024-09-12 05:45:11,234: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 18
analysis_app_celery  | [2024-09-12 05:45:11,235: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:45:11,506 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 18', 'progress': 85.71428571428571}
analysis_app         | 2024-09-12 05:45:11,506 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 18', 'progress': 85.71428571428571}
analysis_app_celery  | [2024-09-12 05:45:16,020: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 19
analysis_app_celery  | [2024-09-12 05:45:16,020: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:45:16,333 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 19', 'progress': 90.47619047619048}
analysis_app         | 2024-09-12 05:45:16,333 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 19', 'progress': 90.47619047619048}
analysis_app_celery  | [2024-09-12 05:45:20,613: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 20
analysis_app_celery  | [2024-09-12 05:45:20,613: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:45:20,954 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 20', 'progress': 95.23809523809523}
analysis_app         | 2024-09-12 05:45:20,954 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 20', 'progress': 95.23809523809523}
analysis_app_celery  | [2024-09-12 05:45:24,873: WARNING/ForkPoolWorker-7] PropertyImage object created with ID: 21
analysis_app_celery  | [2024-09-12 05:45:24,874: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:45:25,130: WARNING/ForkPoolWorker-7] Finished processing all images
analysis_app         | 2024-09-12 05:45:25,132 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 21', 'progress': 100.0}
analysis_app         | 2024-09-12 05:45:25,132 INFO     Sending analysis progress: {'stage': 'download', 'message': 'Downloaded image 21', 'progress': 100.0}
analysis_app_celery  | [2024-09-12 05:45:25,881: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:45:26,189 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'categorization', 'message': 'Categorizing images', 'progress': 20.0}
analysis_app         | 2024-09-12 05:45:26,189 INFO     Sending analysis progress: {'stage': 'categorization', 'message': 'Categorizing images', 'progress': 20.0}
analysis_app_celery  | [2024-09-12 05:45:37,534: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:45:37,550: WARNING/ForkPoolWorker-7] This is the result: {'images': [{'category': 'internal', 'details': {'room_type': 'stairway'}}, {'category': 'external', 'details': {'exterior_type': 'backyard'}}, {'category': 'internal', 'details': {'room_type': 'dining room'}}, {'category': 'internal', 'details': {'room_type': 'dining room'}}]}
analysis_app_celery  | [2024-09-12 05:45:37,554: WARNING/ForkPoolWorker-7] Finished updating json file
analysis_app_celery  | [2024-09-12 05:45:40,052: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:45:40,311 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 1/6', 'progress': 23.333333333333332}
analysis_app         | 2024-09-12 05:45:40,311 INFO     Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 1/6', 'progress': 23.333333333333332}
analysis_app_celery  | [2024-09-12 05:45:52,698: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:45:52,704: WARNING/ForkPoolWorker-7] This is the result: {'images': [{'category': 'internal', 'details': {'room_type': 'bathroom'}}, {'category': 'external', 'details': {'exterior_type': 'entryway'}}, {'category': 'others', 'details': {'others': 'document'}}, {'category': 'internal', 'details': {'room_type': 'bathroom'}}]}
analysis_app_celery  | [2024-09-12 05:45:52,707: WARNING/ForkPoolWorker-7] Finished updating json file
analysis_app_celery  | [2024-09-12 05:45:54,923: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:45:55,194 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 2/6', 'progress': 26.666666666666668}
analysis_app         | 2024-09-12 05:45:55,194 INFO     Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 2/6', 'progress': 26.666666666666668}
analysis_app_celery  | [2024-09-12 05:46:05,483: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:46:05,487: WARNING/ForkPoolWorker-7] This is the result: {'images': [{'category': 'internal', 'details': {'room_type': 'living room'}}, {'category': 'internal', 'details': {'room_type': 'bedroom'}}, {'category': 'external', 'details': {'exterior_type': 'backyard'}}, {'category': 'others', 'details': {'others': 'energy rating chart'}}]}
analysis_app_celery  | [2024-09-12 05:46:05,489: WARNING/ForkPoolWorker-7] Finished updating json file
analysis_app_celery  | [2024-09-12 05:46:07,876: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:46:08,123 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 3/6', 'progress': 30.000000000000004}
analysis_app         | 2024-09-12 05:46:08,123 INFO     Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 3/6', 'progress': 30.000000000000004}
analysis_app_celery  | [2024-09-12 05:46:18,387: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:46:18,391: WARNING/ForkPoolWorker-7] This is the result: {'images': [{'category': 'internal', 'details': {'room_type': 'living room'}}, {'category': 'internal', 'details': {'room_type': 'kitchen'}}, {'category': 'external', 'details': {'exterior_type': 'veranda'}}, {'category': 'internal', 'details': {'room_type': 'kitchen'}}]}
analysis_app_celery  | [2024-09-12 05:46:18,393: WARNING/ForkPoolWorker-7] Finished updating json file
analysis_app_celery  | [2024-09-12 05:46:20,776: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:46:21,153 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 4/6', 'progress': 33.333333333333336}
analysis_app         | 2024-09-12 05:46:21,153 INFO     Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 4/6', 'progress': 33.333333333333336}
analysis_app_celery  | [2024-09-12 05:46:48,060: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:46:48,063: WARNING/ForkPoolWorker-7] This is the result: {'images': [{'category': 'internal', 'details': {'room_type': 'lounge'}}, {'category': 'internal', 'details': {'room_type': 'hallway'}}, {'category': 'internal', 'details': {'room_type': 'home office'}}, {'category': 'external', 'details': {'exterior_type': 'backyard'}}]}
analysis_app_celery  | [2024-09-12 05:46:48,064: WARNING/ForkPoolWorker-7] Finished updating json file
analysis_app_celery  | [2024-09-12 05:46:50,543: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:46:50,893 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 5/6', 'progress': 36.66666666666667}
analysis_app         | 2024-09-12 05:46:50,893 INFO     Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 5/6', 'progress': 36.66666666666667}
analysis_app_celery  | [2024-09-12 05:46:56,048: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:46:56,051: WARNING/ForkPoolWorker-7] This is the result: {'images': [{'category': 'internal', 'details': {'room_type': 'master bedroom'}}]}
analysis_app_celery  | [2024-09-12 05:46:56,054: WARNING/ForkPoolWorker-7] Finished updating json file
analysis_app_celery  | [2024-09-12 05:46:56,793: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:46:57,103: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:46:57,103 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 6/6', 'progress': 40.0}
analysis_app         | 2024-09-12 05:46:57,103 INFO     Sending analysis progress: {'stage': 'categorization', 'message': 'Categorized batch 6/6', 'progress': 40.0}
analysis_app_celery  | [2024-09-12 05:46:57,403: WARNING/ForkPoolWorker-7] Starting grouping images for property: https://www.onthemarket.com/details/13135630/
analysis_app         | 2024-09-12 05:46:57,405 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'grouping', 'message': 'Grouping images by category', 'progress': 40.0}
analysis_app         | 2024-09-12 05:46:57,405 INFO     Sending analysis progress: {'stage': 'grouping', 'message': 'Grouping images by category', 'progress': 40.0}
analysis_app_celery  | [2024-09-12 05:46:57,707: WARNING/ForkPoolWorker-7] Total images found: 21
analysis_app_celery  | [2024-09-12 05:46:57,707: WARNING/ForkPoolWorker-7] Processing image: 3 - Main category: internal, Sub category: living_space
analysis_app_redis   | 1:M 12 Sep 2024 05:46:59.098 * 100 changes in 300 seconds. Saving...
analysis_app_redis   | 1:M 12 Sep 2024 05:46:59.102 * Background saving started by pid 22
analysis_app_redis   | 22:C 12 Sep 2024 05:46:59.107 * DB saved on disk
analysis_app_redis   | 22:C 12 Sep 2024 05:46:59.107 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
analysis_app_redis   | 1:M 12 Sep 2024 05:46:59.208 * Background saving terminated with success
analysis_app_celery  | [2024-09-12 05:46:59,491: WARNING/ForkPoolWorker-7] Created new group: internal - living_space
analysis_app_celery  | [2024-09-12 05:46:59,492: WARNING/ForkPoolWorker-7] Added image 3 to group internal - living_space
analysis_app_celery  | [2024-09-12 05:46:59,492: WARNING/ForkPoolWorker-7] Processing image: 4 - Main category: internal, Sub category: living_space
analysis_app_celery  | [2024-09-12 05:47:00,775: WARNING/ForkPoolWorker-7] Added image 4 to group internal - living_space
analysis_app_celery  | [2024-09-12 05:47:00,776: WARNING/ForkPoolWorker-7] Processing image: 18 - Main category: internal, Sub category: living_space
analysis_app_celery  | [2024-09-12 05:47:02,004: WARNING/ForkPoolWorker-7] Added image 18 to group internal - living_space
analysis_app_celery  | [2024-09-12 05:47:02,004: WARNING/ForkPoolWorker-7] Processing image: 19 - Main category: internal, Sub category: living_space
analysis_app_celery  | [2024-09-12 05:47:03,090: WARNING/ForkPoolWorker-7] Added image 19 to group internal - living_space
analysis_app_celery  | [2024-09-12 05:47:03,091: WARNING/ForkPoolWorker-7] Processing image: 20 - Main category: external, Sub category: back_garden_space
analysis_app_celery  | [2024-09-12 05:47:05,383: WARNING/ForkPoolWorker-7] Created new group: external - back_garden_space
analysis_app_celery  | [2024-09-12 05:47:05,383: WARNING/ForkPoolWorker-7] Added image 20 to group external - back_garden_space
analysis_app_celery  | [2024-09-12 05:47:05,383: WARNING/ForkPoolWorker-7] Processing image: 21 - Main category: internal, Sub category: bedroom_space
analysis_app_celery  | [2024-09-12 05:47:07,536: WARNING/ForkPoolWorker-7] Created new group: internal - bedroom_space
analysis_app_celery  | [2024-09-12 05:47:07,537: WARNING/ForkPoolWorker-7] Added image 21 to group internal - bedroom_space
analysis_app_celery  | [2024-09-12 05:47:07,537: WARNING/ForkPoolWorker-7] Processing image: 1 - Main category: internal, Sub category: living_space
analysis_app_celery  | [2024-09-12 05:47:08,763: WARNING/ForkPoolWorker-7] Added image 1 to group internal - living_space
analysis_app_celery  | [2024-09-12 05:47:08,763: WARNING/ForkPoolWorker-7] Processing image: 2 - Main category: external, Sub category: back_garden_space
analysis_app_celery  | [2024-09-12 05:47:09,994: WARNING/ForkPoolWorker-7] Added image 2 to group external - back_garden_space
analysis_app_celery  | [2024-09-12 05:47:09,994: WARNING/ForkPoolWorker-7] Processing image: 5 - Main category: internal, Sub category: bathroom_space
analysis_app_celery  | [2024-09-12 05:47:12,148: WARNING/ForkPoolWorker-7] Created new group: internal - bathroom_space
analysis_app_celery  | [2024-09-12 05:47:12,148: WARNING/ForkPoolWorker-7] Added image 5 to group internal - bathroom_space
analysis_app_celery  | [2024-09-12 05:47:12,148: WARNING/ForkPoolWorker-7] Processing image: 6 - Main category: external, Sub category: front_garden_space
analysis_app_celery  | [2024-09-12 05:47:14,094: WARNING/ForkPoolWorker-7] Created new group: external - front_garden_space
analysis_app_celery  | [2024-09-12 05:47:14,095: WARNING/ForkPoolWorker-7] Added image 6 to group external - front_garden_space
analysis_app_celery  | [2024-09-12 05:47:14,095: WARNING/ForkPoolWorker-7] Processing image: 7 - Main category: others, Sub category: others
analysis_app_celery  | [2024-09-12 05:47:16,136: WARNING/ForkPoolWorker-7] Created new group: others - others
analysis_app_celery  | [2024-09-12 05:47:16,137: WARNING/ForkPoolWorker-7] Added image 7 to group others - others
analysis_app_celery  | [2024-09-12 05:47:16,137: WARNING/ForkPoolWorker-7] Processing image: 8 - Main category: internal, Sub category: bathroom_space
analysis_app_celery  | [2024-09-12 05:47:17,282: WARNING/ForkPoolWorker-7] Added image 8 to group internal - bathroom_space
analysis_app_celery  | [2024-09-12 05:47:17,282: WARNING/ForkPoolWorker-7] Processing image: 9 - Main category: internal, Sub category: living_space
analysis_app_celery  | [2024-09-12 05:47:18,238: WARNING/ForkPoolWorker-7] Added image 9 to group internal - living_space
analysis_app_celery  | [2024-09-12 05:47:18,239: WARNING/ForkPoolWorker-7] Processing image: 10 - Main category: internal, Sub category: bedroom_space
analysis_app_celery  | [2024-09-12 05:47:19,515: WARNING/ForkPoolWorker-7] Added image 10 to group internal - bedroom_space
analysis_app_celery  | [2024-09-12 05:47:19,516: WARNING/ForkPoolWorker-7] Processing image: 11 - Main category: external, Sub category: back_garden_space
analysis_app_celery  | [2024-09-12 05:47:20,764: WARNING/ForkPoolWorker-7] Added image 11 to group external - back_garden_space
analysis_app_celery  | [2024-09-12 05:47:20,765: WARNING/ForkPoolWorker-7] Processing image: 12 - Main category: others, Sub category: others
analysis_app_celery  | [2024-09-12 05:47:22,283: WARNING/ForkPoolWorker-7] Added image 12 to group others - others
analysis_app_celery  | [2024-09-12 05:47:22,283: WARNING/ForkPoolWorker-7] Processing image: 13 - Main category: internal, Sub category: living_space
analysis_app_celery  | [2024-09-12 05:47:23,510: WARNING/ForkPoolWorker-7] Added image 13 to group internal - living_space
analysis_app_celery  | [2024-09-12 05:47:23,510: WARNING/ForkPoolWorker-7] Processing image: 14 - Main category: internal, Sub category: kitchen_space
analysis_app_celery  | [2024-09-12 05:47:25,659: WARNING/ForkPoolWorker-7] Created new group: internal - kitchen_space
analysis_app_celery  | [2024-09-12 05:47:25,660: WARNING/ForkPoolWorker-7] Added image 14 to group internal - kitchen_space
analysis_app_celery  | [2024-09-12 05:47:25,660: WARNING/ForkPoolWorker-7] Processing image: 15 - Main category: external, Sub category: front_garden_space
analysis_app_celery  | [2024-09-12 05:47:26,888: WARNING/ForkPoolWorker-7] Added image 15 to group external - front_garden_space
analysis_app_celery  | [2024-09-12 05:47:26,889: WARNING/ForkPoolWorker-7] Processing image: 16 - Main category: internal, Sub category: kitchen_space
analysis_app_celery  | [2024-09-12 05:47:28,043: WARNING/ForkPoolWorker-7] Added image 16 to group internal - kitchen_space
analysis_app_celery  | [2024-09-12 05:47:28,043: WARNING/ForkPoolWorker-7] Processing image: 17 - Main category: internal, Sub category: living_space
analysis_app_celery  | [2024-09-12 05:47:29,012: WARNING/ForkPoolWorker-7] Added image 17 to group internal - living_space
analysis_app_celery  | [2024-09-12 05:47:29,013: WARNING/ForkPoolWorker-7] Finished grouping all images
analysis_app_celery  | [2024-09-12 05:47:29,013: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:47:29,353: WARNING/ForkPoolWorker-7] Group images results:
analysis_app_celery  | [2024-09-12 05:47:29,353: WARNING/ForkPoolWorker-7] {
analysis_app_celery  |   "internal": {
analysis_app_celery  |     "living_space": [
analysis_app_celery  |       3,
analysis_app_celery  |       4,
analysis_app_celery  |       18,
analysis_app_celery  |       19,
analysis_app_celery  |       1,
analysis_app_celery  |       9,
analysis_app_celery  |       13,
analysis_app_celery  |       17
analysis_app         | 2024-09-12 05:47:29,354 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'grouping', 'message': 'Finished grouping images', 'progress': 60.00000000000001}
analysis_app_celery  |     ],
analysis_app_celery  |     "bedroom_space": [
analysis_app_celery  |       21,
analysis_app_celery  |       10
analysis_app_celery  |     ],
analysis_app_celery  |     "bathroom_space": [
analysis_app_celery  |       5,
analysis_app_celery  |       8
analysis_app         | 2024-09-12 05:47:29,354 INFO     Sending analysis progress: {'stage': 'grouping', 'message': 'Finished grouping images', 'progress': 60.00000000000001}
analysis_app_celery  |     ],
analysis_app_celery  |     "kitchen_space": [
analysis_app_celery  |       14,
analysis_app_celery  |       16
analysis_app_celery  |     ]
analysis_app_celery  |   },
analysis_app_celery  |   "external": {
analysis_app_celery  |     "back_garden_space": [
analysis_app_celery  |       20,
analysis_app_celery  |       2,
analysis_app_celery  |       11
analysis_app_celery  |     ],
analysis_app_celery  |     "front_garden_space": [
analysis_app_celery  |       6,
analysis_app_celery  |       15
analysis_app_celery  |     ]
analysis_app_celery  |   },
analysis_app_celery  |   "others": {
analysis_app_celery  |     "others": [
analysis_app_celery  |       7,
analysis_app_celery  |       12
analysis_app_celery  |     ]
analysis_app_celery  |   }
analysis_app_celery  | }
analysis_app_celery  | [2024-09-12 05:47:29,353: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:47:29,659: WARNING/ForkPoolWorker-7] Starting merging grouped images for property: https://www.onthemarket.com/details/13135630/
analysis_app         | 2024-09-12 05:47:29,660 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'merging', 'message': 'Merging grouped images', 'progress': 60.0}
analysis_app         | 2024-09-12 05:47:29,660 INFO     Sending analysis progress: {'stage': 'merging', 'message': 'Merging grouped images', 'progress': 60.0}
analysis_app_celery  | [2024-09-12 05:47:29,961: WARNING/ForkPoolWorker-7] Total grouped images: 7
analysis_app_celery  | [2024-09-12 05:47:29,962: WARNING/ForkPoolWorker-7] Processing group: 1 - internal - living_space
analysis_app_celery  | [2024-09-12 05:47:30,268: WARNING/ForkPoolWorker-7] Images in group: 8
analysis_app_celery  | [2024-09-12 05:47:30,268: WARNING/ForkPoolWorker-7] Merging subgroup 1 of 2
analysis_app_celery  | [2024-09-12 05:47:38,464: WARNING/ForkPoolWorker-7] Created merged image: 1
analysis_app_celery  | [2024-09-12 05:47:38,465: WARNING/ForkPoolWorker-7] Merging subgroup 2 of 2
analysis_app_celery  | [2024-09-12 05:47:46,244: WARNING/ForkPoolWorker-7] Created merged image: 2
analysis_app_celery  | [2024-09-12 05:47:46,245: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:47:46,550: WARNING/ForkPoolWorker-7] Processing group: 2 - external - back_garden_space
analysis_app         | 2024-09-12 05:47:46,552 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 1/7', 'progress': 62.857142857142854}
analysis_app         | 2024-09-12 05:47:46,552 INFO     Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 1/7', 'progress': 62.857142857142854}
analysis_app_celery  | [2024-09-12 05:47:46,803: WARNING/ForkPoolWorker-7] Images in group: 3
analysis_app_celery  | [2024-09-12 05:47:46,804: WARNING/ForkPoolWorker-7] Merging subgroup 1 of 1
analysis_app_celery  | [2024-09-12 05:47:55,875: WARNING/ForkPoolWorker-7] Created merged image: 3
analysis_app_celery  | [2024-09-12 05:47:55,876: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:47:56,138: WARNING/ForkPoolWorker-7] Processing group: 3 - internal - bedroom_space
analysis_app         | 2024-09-12 05:47:56,138 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 2/7', 'progress': 65.71428571428571}
analysis_app         | 2024-09-12 05:47:56,138 INFO     Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 2/7', 'progress': 65.71428571428571}
analysis_app_celery  | [2024-09-12 05:47:56,372: WARNING/ForkPoolWorker-7] Images in group: 2
analysis_app_celery  | [2024-09-12 05:47:56,373: WARNING/ForkPoolWorker-7] Merging subgroup 1 of 1
analysis_app_celery  | [2024-09-12 05:48:00,678: WARNING/ForkPoolWorker-7] Created merged image: 4
analysis_app_celery  | [2024-09-12 05:48:00,679: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:48:00,991 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 3/7', 'progress': 68.57142857142857}
analysis_app_celery  | [2024-09-12 05:48:00,991: WARNING/ForkPoolWorker-7] Processing group: 4 - internal - bathroom_space
analysis_app         | 2024-09-12 05:48:00,991 INFO     Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 3/7', 'progress': 68.57142857142857}
analysis_app_celery  | [2024-09-12 05:48:01,294: WARNING/ForkPoolWorker-7] Images in group: 2
analysis_app_celery  | [2024-09-12 05:48:01,294: WARNING/ForkPoolWorker-7] Merging subgroup 1 of 1
analysis_app_celery  | [2024-09-12 05:48:06,518: WARNING/ForkPoolWorker-7] Created merged image: 5
analysis_app_celery  | [2024-09-12 05:48:06,518: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:48:06,829: WARNING/ForkPoolWorker-7] Processing group: 5 - external - front_garden_space
analysis_app         | 2024-09-12 05:48:06,830 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 4/7', 'progress': 71.42857142857143}
analysis_app         | 2024-09-12 05:48:06,830 INFO     Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 4/7', 'progress': 71.42857142857143}
analysis_app_celery  | [2024-09-12 05:48:07,131: WARNING/ForkPoolWorker-7] Images in group: 2
analysis_app_celery  | [2024-09-12 05:48:07,132: WARNING/ForkPoolWorker-7] Merging subgroup 1 of 1
analysis_app_celery  | [2024-09-12 05:48:13,276: WARNING/ForkPoolWorker-7] Created merged image: 6
analysis_app_celery  | [2024-09-12 05:48:13,276: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:48:13,584: WARNING/ForkPoolWorker-7] Processing group: 6 - others - others
analysis_app         | 2024-09-12 05:48:13,587 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 5/7', 'progress': 74.28571428571429}
analysis_app         | 2024-09-12 05:48:13,587 INFO     Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 5/7', 'progress': 74.28571428571429}
analysis_app_celery  | [2024-09-12 05:48:13,842: WARNING/ForkPoolWorker-7] Images in group: 2
analysis_app_celery  | [2024-09-12 05:48:13,842: WARNING/ForkPoolWorker-7] Merging subgroup 1 of 1
analysis_app_celery  | [2024-09-12 05:48:18,484: WARNING/ForkPoolWorker-7] Created merged image: 7
analysis_app_celery  | [2024-09-12 05:48:18,485: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:48:18,745: WARNING/ForkPoolWorker-7] Processing group: 7 - internal - kitchen_space
analysis_app         | 2024-09-12 05:48:18,745 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 6/7', 'progress': 77.14285714285714}
analysis_app         | 2024-09-12 05:48:18,745 INFO     Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 6/7', 'progress': 77.14285714285714}
analysis_app_celery  | [2024-09-12 05:48:19,110: WARNING/ForkPoolWorker-7] Images in group: 2
analysis_app_celery  | [2024-09-12 05:48:19,110: WARNING/ForkPoolWorker-7] Merging subgroup 1 of 1
analysis_app_celery  | [2024-09-12 05:48:23,722: WARNING/ForkPoolWorker-7] Created merged image: 8
analysis_app_celery  | [2024-09-12 05:48:23,723: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:48:24,032: WARNING/ForkPoolWorker-7] Finished merging all grouped images
analysis_app_celery  | [2024-09-12 05:48:24,032: WARNING/ForkPoolWorker-7] Merged images results:
analysis_app         | 2024-09-12 05:48:24,033 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 7/7', 'progress': 80.0}
analysis_app_celery  | [2024-09-12 05:48:24,033: WARNING/ForkPoolWorker-7] {
analysis_app_celery  |   "internal_living_space": [
analysis_app_celery  |     "https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_1_dsoIq1k.jpg",
analysis_app         | 2024-09-12 05:48:24,033 INFO     Sending analysis progress: {'stage': 'merging', 'message': 'Merged group 7/7', 'progress': 80.0}
analysis_app_celery  |     "https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_2_DqvBgwe.jpg"
analysis_app_celery  |   ],
analysis_app_celery  |   "external_back_garden_space": [
analysis_app_celery  |     "https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_3_6RNlkyE.jpg"
analysis_app_celery  |   ],
analysis_app_celery  |   "internal_bedroom_space": [
analysis_app_celery  |     "https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_4_RhBpO0j.jpg"
analysis_app_celery  |   ],
analysis_app_celery  |   "internal_bathroom_space": [
analysis_app_celery  |     "https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_5_smstPlU.jpg"
analysis_app_celery  |   ],
analysis_app_celery  |   "external_front_garden_space": [
analysis_app_celery  |     "https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_6_SwtMS0I.jpg"
analysis_app_celery  |   ],
analysis_app_celery  |   "others_others": [
analysis_app_celery  |     "https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_7_kR0Xfql.jpg"
analysis_app_celery  |   ],
analysis_app_celery  |   "internal_kitchen_space": [
analysis_app_celery  |     "https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_8_2bYQZoo.jpg"
analysis_app_celery  |   ]
analysis_app_celery  | }
analysis_app_celery  | [2024-09-12 05:48:24,033: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:48:24,340 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzing merged images', 'progress': 80.0}
analysis_app         | 2024-09-12 05:48:24,340 INFO     Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzing merged images', 'progress': 80.0}
analysis_app_celery  | [2024-09-12 05:48:44,343: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:48:45,840: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:48:46,083 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 1/8', 'progress': 82.5}
analysis_app         | 2024-09-12 05:48:46,083 INFO     Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 1/8', 'progress': 82.5}
analysis_app_celery  | [2024-09-12 05:48:53,775: INFO/ForkPoolWorker-7] Retrying request to /chat/completions in 0.854003 seconds
analysis_app_celery  | [2024-09-12 05:49:11,335: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:49:13,322: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:49:13,569 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 2/8', 'progress': 85.00000000000001}
analysis_app         | 2024-09-12 05:49:13,569 INFO     Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 2/8', 'progress': 85.00000000000001}
analysis_app_celery  | [2024-09-12 05:49:28,959: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:49:30,383: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:49:30,699 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 3/8', 'progress': 87.5}
analysis_app         | 2024-09-12 05:49:30,699 INFO     Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 3/8', 'progress': 87.5}
analysis_app_celery  | [2024-09-12 05:49:44,316: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:49:45,433: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:49:45,679 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 4/8', 'progress': 90.0}
analysis_app         | 2024-09-12 05:49:45,679 INFO     Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 4/8', 'progress': 90.0}
analysis_app_celery  | [2024-09-12 05:49:57,944: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:49:58,951: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:49:59,196 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 5/8', 'progress': 92.5}
analysis_app         | 2024-09-12 05:49:59,196 INFO     Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 5/8', 'progress': 92.5}
analysis_app_celery  | [2024-09-12 05:50:31,218: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:50:32,128: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:50:32,444 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 6/8', 'progress': 95.0}
analysis_app         | 2024-09-12 05:50:32,444 INFO     Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 6/8', 'progress': 95.0}
analysis_app_celery  | [2024-09-12 05:50:46,885: INFO/ForkPoolWorker-7] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
analysis_app_celery  | [2024-09-12 05:50:47,796: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app_celery  | [2024-09-12 05:50:48,108: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:50:48,108 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 8/8', 'progress': 100.0}
analysis_app         | 2024-09-12 05:50:48,108 INFO     Sending analysis progress: {'stage': 'analysis', 'message': 'Analyzed group 8/8', 'progress': 100.0}
analysis_app         | 2024-09-12 05:50:48,415 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'overall_analysis', 'message': 'Calculating overall property condition', 'progress': 100.0}
analysis_app         | 2024-09-12 05:50:48,415 INFO     Sending analysis progress: {'stage': 'overall_analysis', 'message': 'Calculating overall property condition', 'progress': 100.0}
analysis_app_celery  | [2024-09-12 05:50:48,416: WARNING/ForkPoolWorker-7] This is the final results: {'property_url': 'https://www.onthemarket.com/details/13135630/', 'stages': {'initial_categorization': [{'category': 'internal', 'details': {'room_type': 'stairway'}}, {'category': 'external', 'details': {'exterior_type': 'backyard'}}, {'category': 'internal', 'details': {'room_type': 'dining room'}}, {'category': 'internal', 'details': {'room_type': 'dining room'}}, {'category': 'internal', 'details': {'room_type': 'bathroom'}}, {'category': 'external', 'details': {'exterior_type': 'entryway'}}, {'category': 'others', 'details': {'others': 'document'}}, {'category': 'internal', 'details': {'room_type': 'bathroom'}}, {'category': 'internal', 'details': {'room_type': 'living room'}}, {'category': 'internal', 'details': {'room_type': 'bedroom'}}, {'category': 'external', 'details': {'exterior_type': 'backyard'}}, {'category': 'others', 'details': {'others': 'energy rating chart'}}, {'category': 'internal', 'details': {'room_type': 'living room'}}, {'category': 'internal', 'details': {'room_type': 'kitchen'}}, {'category': 'external', 'details': {'exterior_type': 'veranda'}}, {'category': 'internal', 'details': {'room_type': 'kitchen'}}, {'category': 'internal', 'details': {'room_type': 'lounge'}}, {'category': 'internal', 'details': {'room_type': 'hallway'}}, {'category': 'internal', 'details': {'room_type': 'home office'}}, {'category': 'external', 'details': {'exterior_type': 'backyard'}}, {'category': 'internal', 'details': {'room_type': 'master bedroom'}}], 'grouped_images': {'internal': {'living_space': [3, 4, 18, 19, 1, 9, 13, 17], 'bedroom_space': [21, 10], 'bathroom_space': [5, 8], 'kitchen_space': [14, 16]}, 'external': {'back_garden_space': [20, 2, 11], 'front_garden_space': [6, 15]}, 'others': {'others': [7, 12]}}, 'merged_images': {'internal_living_space': ['https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_1_dsoIq1k.jpg', 'https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_2_DqvBgwe.jpg'], 'external_back_garden_space': ['https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_3_6RNlkyE.jpg'], 'internal_bedroom_space': ['https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_4_RhBpO0j.jpg'], 'internal_bathroom_space': ['https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_5_smstPlU.jpg'], 'external_front_garden_space': ['https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_6_SwtMS0I.jpg'], 'others_others': ['https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_7_kR0Xfql.jpg'], 'internal_kitchen_space': ['https://propertyanalysisstorage.s3.amazonaws.com/media/merged_property_images/merged_image_8_2bYQZoo.jpg']}, 'detailed_analysis': {'internal_living_space': [{'image_number': 1, 'condition_label': 'above_average', 'reasoning': 'The room has modern finishes and good quality fixtures. The presence of a decorative mirror and a well-maintained staircase enhance the overall appeal. The space is clean and well-presented with a pleasant layout.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_2_MBayDT3.jpg', 'image_id': 3}, {'image_number': 2, 'condition_label': 'above_average', 'reasoning': "This room features stylish and contemporary furniture with a cohesive color scheme. The space is neat and well-maintained with featured plant decor enhancing the appeal. It suits an 'above average' rating but lacks some of the high-end finishes needed for an 'excellent' rating.", 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_3_K5vQ2s9.jpg', 'image_id': 4}, {'image_number': 3, 'condition_label': 'excellent', 'reasoning': 'The room has high-end finishes, modern fixtures, and stylish furniture. The decor is thoughtfully arranged, creating a welcoming and chic environment with a classic chandelier adding a luxury touch. This space is well-staged and resembles a show home.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_17_yClTCHz.jpg', 'image_id': 18}, {'image_number': 4, 'condition_label': 'excellent', 'reasoning': "This room meets the high standard of 'excellent' with high-end finishes, a modern fireplace, and contemporary furniture. The room design is cohesive with impeccable attention to details in staging and decor.", 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_18_4Q2INGH.jpg', 'image_id': 19}], 'external_back_garden_space': [{'image_number': 1, 'condition_label': 'above_average', 'reasoning': 'The backyard features well-maintained landscaping with a healthy lawn and neatly trimmed plants. The patio area is clean and well-organized, demonstrating a good quality of maintenance. The space is inviting with clear areas for relaxation.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_19_JT4UGC4.jpg', 'image_id': 20}, {'image_number': 2, 'condition_label': 'above_average', 'reasoning': 'This garden has a lush, green lawn and is well-kept. The borders are neatly defined with trimmed foliage, evidencing regular maintenance. The private, enclosed space and inviting feel contribute to an above average rating.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_1_aXDvcHW.jpg', 'image_id': 2}, {'image_number': 3, 'condition_label': 'above_average', 'reasoning': 'The garden is tidy and well-maintained with a neatly trimmed lawn and an orderly appearance. The clear definition of the space and the good upkeep of surrounding elements indicate a above average condition.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_10_P4EztKU.jpg', 'image_id': 11}], 'internal_bedroom_space': [{'image_number': 1, 'condition_label': 'above_average', 'reasoning': "The room is spacious with good natural light, modern furniture, and a neat appearance. However, it lacks the high-end finishes, cohesive design, and additional desirable features seen in the 'Excellent' category.", 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_20_cY3T7zP.jpg', 'image_id': 21}, {'image_number': 2, 'condition_label': 'above_average', 'reasoning': "The room is clean and well-maintained with ample natural light and modern fixtures. The decor is simple but attractive, and while it does not meet the high standards of the 'Excellent' category, it is still of good quality and well-presented overall.", 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_9_rGsko6K.jpg', 'image_id': 10}], 'internal_bathroom_space': [{'image_number': 1, 'condition_label': 'above average', 'reasoning': "The bathroom features clean, modern finishes with a cohesive color scheme and layout. While it doesn't meet the highest level of luxury required for an Excellent rating, it is attractive, well-maintained, and tidy.", 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_4_4BZIVXk.jpg', 'image_id': 5}, {'image_number': 2, 'condition_label': 'above average', 'reasoning': 'This bathroom also has modern and clean finishes with a pleasant layout. The fixtures appear to be of good quality and well-maintained. The design is cohesive and aesthetically pleasing, but not at the high-end level required to be categorized as Excellent.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_7_53ZaqcF.jpg', 'image_id': 8}], 'external_front_garden_space': [{'image_number': 1, 'condition_label': 'excellent', 'reasoning': 'The first image shows a house with a very refined exterior, including a well-maintained lawn and landscaped garden. The architectural design is sophisticated with high-quality finishes. There is a paved pathway leading to a well-designed entryway. The fencing and entrance reflect high-end, modern aesthetics, and the entire setting is presented impeccably.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_5_eCPdzW8.jpg', 'image_id': 6}, {'image_number': 2, 'condition_label': 'below average', 'reasoning': 'The second image depicts a balcony that appears outdated and worn, which signifies signs of wear and lack of updates. The wooden flooring looks aged with visible damage, and the area does not show cohesive design or pleasant appearance. This area lacks desirable features, cleanliness, or high-quality finishes.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_14_WXR8JCs.jpg', 'image_id': 15}], 'internal_kitchen_space': [{'image_number': 1, 'condition_label': 'excellent', 'reasoning': 'The kitchen has high-end, modern finishes and fixtures. It features stylish, contemporary decor, and the design exhibits attention to detail. The room is impeccably presented and staged, with good natural lighting and a cohesive color scheme.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_13_BhvZTOp.jpg', 'image_id': 14}, {'image_number': 2, 'condition_label': 'excellent', 'reasoning': 'Much like the first image, the kitchen here displays new or very refurbished elements, high-quality hardscaping, desirable features, and modern fixtures. The space is well-lit, clean, and exhibits a well-thought-out, cohesive design.', 'image_url': 'https://propertyanalysisstorage.s3.amazonaws.com/media/property_images/property_1_image_15_UNZOIox.jpg', 'image_id': 16}]}, 'overall_condition': {'overall_condition_label': 'Good', 'average_score': 3.92, 'distribution': {'excellent': 0.4166666666666667, 'above average': 0.3333333333333333, 'below average': 0.25}, 'condition_distribution': {'excellent': 41.66666666666667, 'above average': 33.33333333333333, 'below average': 25.0}, 'areas_of_concern': 3, 'confidence': 'Medium', 'explanation': '\nDetailed calculation of overall property condition:\n\n1. Total number of valid assessments: 12\n\n2. Condition counts:\n   - Excellent: 5\n   - Above average: 4\n   - Below average: 3\n\n3. Calculation of average score:\n   - Each condition is assigned a value: Excellent (5), Above Average (4), Average (3), Below Average (2), Poor (1)\n   - Total value: 47 (sum of all condition values)\n   - Average score: 47 / 12 = 3.92\n\n4. Distribution of conditions:\n   - Excellent: 41.67%\n   - Above average: 33.33%\n   - Below average: 25.00%\n\n5. Areas of concern (conditions below average): 3\n\n6. Overall rating determination:\n   - Excellent: 4.5 and above\n   - Good: 3.5 to 4.49\n   - Average: 2.5 to 3.49\n   - Below Average: 1.5 to 2.49\n   - Poor: Below 1.5\n\n   Based on the average score of 3.92, the overall rating is: Good\n\n7. Confidence level:\n   - High: More than 20 assessments\n   - Medium: 11 to 20 assessments\n   - Low: 10 or fewer assessments\n\n   Based on 12 assessments, the confidence level is: Medium\n'}}, 'Image_Analysis': {}}
analysis_app_celery  | [2024-09-12 05:50:48,416: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:50:48,726 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'overall_analysis', 'message': 'Finished calculating overall condition', 'progress': 120.0}
analysis_app         | 2024-09-12 05:50:48,726 INFO     Sending analysis progress: {'stage': 'overall_analysis', 'message': 'Finished calculating overall condition', 'progress': 120.0}
analysis_app_celery  | [2024-09-12 05:50:49,332: WARNING/ForkPoolWorker-7] This is the update:::
analysis_app         | 2024-09-12 05:50:49,645 - analysis.consumers - INFO - Sending analysis progress: {'stage': 'complete', 'message': 'Analysis completed successfully', 'progress': 100.0}
analysis_app         | 2024-09-12 05:50:49,645 INFO     Sending analysis progress: {'stage': 'complete', 'message': 'Analysis completed successfully', 'progress': 100.0}
analysis_app_celery  | [2024-09-12 05:50:49,655: INFO/ForkPoolWorker-7] Task analysis.tasks.analyze_property[3c3a7fa7-88a0-413a-ba73-e42ba85f3a47] succeeded in 428.484410862s: None